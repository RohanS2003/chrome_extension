(()=>{"use strict";var t,e,o={3571:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isExtensionContextInvalidatedError=e.isUserDraggingWindowError=e.isCouldNotEstablishConnectionError=e.isTabNotExistError=e.throwRuntimeLastError=void 0,e.throwRuntimeLastError=function(){var t=chrome.runtime.lastError;if(null==t?void 0:t.message)throw new Error(t.message)},e.isTabNotExistError=function(t){return t instanceof Error&&t.message.toLowerCase().startsWith("no tab with id")},e.isCouldNotEstablishConnectionError=function(t){return t instanceof Error&&t.message.toLowerCase().startsWith("could not establish connection")},e.isUserDraggingWindowError=function(t){return t instanceof Error&&t.message.toLowerCase().indexOf("user may be dragging a tab")>-1},e.isExtensionContextInvalidatedError=function(t){return t instanceof Error&&t.message.toLowerCase().indexOf("extension context invalidated")>-1}},4081:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.unGreyOutBody=e.greyOutBody=void 0;var o=null;e.greyOutBody=function(){document.body&&(o||(o={backgroundColor:document.body.style.backgroundColor,filter:document.body.style.filter,transition:document.body.style.transition,opacity:document.body.style.opacity},document.body.style.filter="grayscale(100%)",document.body.style.transition="all 0.5s ease",document.body.style.backgroundColor="black",document.body.style.opacity="0.6"))},e.unGreyOutBody=function(){o&&document.body&&(document.body.style.filter=o.filter,document.body.style.transition=o.transition,document.body.style.backgroundColor=o.backgroundColor,document.body.style.opacity=o.opacity,o=null)}},3892:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.runManifestV3SleepCounterMeasures=void 0;var n=o(8724),r=o(665),i=o(6866),a=o(3571),s=0;function u(){chrome.runtime.sendMessage({type:n.WAKE_UP_BACKGROUND},(function(t){t||console.error("Background is not awake");try{(0,a.throwRuntimeLastError)()}catch(t){(0,i.ignore)(a.isExtensionContextInvalidatedError,a.isCouldNotEstablishConnectionError)(t)}"visible"===document.visibilityState&&(s=window.setTimeout((function(){return u()}),(0,r.getMinutesInMs)(1)))}))}function c(){chrome.runtime.connect().onDisconnect.addListener((function(){try{(0,a.throwRuntimeLastError)()}catch(t){(0,i.ignore)(a.isExtensionContextInvalidatedError,a.isCouldNotEstablishConnectionError)(t)}setTimeout((function(){return c()}),(0,r.getMinutesInMs)(1))}))}e.runManifestV3SleepCounterMeasures=function(){u(),c(),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&(window.clearTimeout(s),u())}))}},8724:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LIMIT_OK=e.LIMIT_EXCEEDED=e.WAKE_UP_BACKGROUND=void 0,e.WAKE_UP_BACKGROUND="wake-up",e.LIMIT_EXCEEDED="limit-exceeded",e.LIMIT_OK="limit-ok"},665:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.presentHoursOrMinutesFromMinutes=e.getDatesWeekSundayDate=e.rangeDaysAgo=e.get7DaysPriorDate=e.getTimeWithoutSeconds=e.parseTime=e.getTimeFromMs=e.getDaysInMs=e.getHoursInMs=e.getMinutesInMs=e.getIsoDate=void 0;var o=6e4,n=36e5,r=864e5;e.getIsoDate=function(t){void 0===t&&(t=new Date);var e=t.getFullYear(),o=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0");return"".concat(e,"-").concat(o,"-").concat(n)},e.getMinutesInMs=function(t){return t*o},e.getHoursInMs=function(t){return t*n},e.getDaysInMs=function(t){return t*r},e.getTimeFromMs=function(t){var e=Math.floor(t/1e3%60),i=Math.floor(t/o%60),a=Math.floor(t/n%24),s=Math.floor(t/r%365);return[s>0?"".concat(s,"d"):"",a>0?"".concat(a,"h"):"",i>0?"".concat(i,"m"):"","".concat(e,"s")].filter(Boolean).join(" ")},e.parseTime=function(t){var e=Math.floor(t/1e3),i=Math.floor(t/o),a=Math.floor(t/n),s=Math.floor(t/r),u=Math.floor(t/6048e5),c=Math.floor(t/31536e6);return{days:s,hours:a,minutes:i,seconds:e,weeks:u,months:Math.floor(t/2592e6),years:c}},e.getTimeWithoutSeconds=function(t){var e=Math.floor(t/o%60),i=Math.floor(t/n%24),a=Math.floor(t/r%365);return[a>0?"".concat(a,"d"):"",i>0?"".concat(i,"h"):"",i>0&&0===e?"":"".concat(e,"m")].filter(Boolean).join(" ")};var i=function(t){return new Date(t)};e.get7DaysPriorDate=function(t,o){return(0,e.rangeDaysAgo)({from:t,days:7,map:o||i})},e.rangeDaysAgo=function(t){var e=t.from,o=t.days,n=t.map,r=new Date(e),a=n||i;return Array.from({length:o}).map((function(t,e){return r.setDate(r.getDate()-Number(e>0)),a(r)}))},e.getDatesWeekSundayDate=function(t){return void 0===t&&(t=new Date),t.setDate(t.getDate()+t.getDay()),t},e.presentHoursOrMinutesFromMinutes=function(t){if(t<60)return"".concat(t.toFixed(0),"m");var e=Math.floor(t/60),o=Math.round(t/60);return"".concat(o===e?o:o-.5,"h")}},6866:(t,e)=>{function o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){if(t.some((function(t){return t(e)})))return null;throw e}}Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfNot=e.ignore=void 0,e.ignore=o,e.throwIfNot=o}},n={};function r(t){var e=n[t];if(void 0!==e)return e.exports;var i=n[t]={exports:{}};return o[t](i,i.exports,r),i.exports}t=r(8724),e=r(4081),(0,r(3892).runManifestV3SleepCounterMeasures)(),chrome.runtime.onMessage.addListener((function(o){o.type===t.LIMIT_EXCEEDED?(0,e.greyOutBody)():o.type===t.LIMIT_OK&&(0,e.unGreyOutBody)()}))})();